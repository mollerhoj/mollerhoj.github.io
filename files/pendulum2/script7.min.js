'use strict';const a0_0x3f7af0=a0_0x17cc;(function(_0x2c54bd,_0x5744ec){const _0x14dbdc=a0_0x17cc,_0x4220f1=_0x2c54bd();while(!![]){try{const _0x405559=parseInt(_0x14dbdc(0x185))/0x1+parseInt(_0x14dbdc(0xe3))/0x2+parseInt(_0x14dbdc(0x18b))/0x3+-parseInt(_0x14dbdc(0xd3))/0x4*(-parseInt(_0x14dbdc(0xea))/0x5)+parseInt(_0x14dbdc(0x192))/0x6*(parseInt(_0x14dbdc(0xe9))/0x7)+-parseInt(_0x14dbdc(0x110))/0x8*(parseInt(_0x14dbdc(0xc8))/0x9)+-parseInt(_0x14dbdc(0x184))/0xa*(parseInt(_0x14dbdc(0x163))/0xb);if(_0x405559===_0x5744ec)break;else _0x4220f1['push'](_0x4220f1['shift']());}catch(_0xcbc247){_0x4220f1['push'](_0x4220f1['shift']());}}}(a0_0x25ad,0xd5e19));const urlParams=new URLSearchParams(window[a0_0x3f7af0(0x13f)]['search']),DEBUG=urlParams['has'](a0_0x3f7af0(0x139)),canvas=document[a0_0x3f7af0(0x113)](a0_0x3f7af0(0x182)),ctx=canvas[a0_0x3f7af0(0x140)]('2d'),offscreenCanvas=document[a0_0x3f7af0(0xc1)](a0_0x3f7af0(0x182)),ctx2=offscreenCanvas['getContext']('2d');canvas[a0_0x3f7af0(0xfd)]=window[a0_0x3f7af0(0x16b)],canvas[a0_0x3f7af0(0x155)]=window['innerHeight'];DEBUG&&(canvas[a0_0x3f7af0(0xfd)]=window[a0_0x3f7af0(0x16b)]-0x131);offscreenCanvas[a0_0x3f7af0(0xfd)]=canvas[a0_0x3f7af0(0xfd)],offscreenCanvas[a0_0x3f7af0(0x155)]=canvas[a0_0x3f7af0(0x155)],document[a0_0x3f7af0(0x116)][a0_0x3f7af0(0xb8)][a0_0x3f7af0(0xd9)]=0x0,document['body'][a0_0x3f7af0(0xb8)][a0_0x3f7af0(0x165)]=0x0,window['addEventListener'](a0_0x3f7af0(0x164),()=>{const _0x44680f=a0_0x3f7af0;canvas[_0x44680f(0xfd)]=window['innerWidth'],canvas[_0x44680f(0x155)]=window[_0x44680f(0x145)],DEBUG&&(canvas[_0x44680f(0xfd)]=window['innerWidth']-0x131),offscreenCanvas['width']=canvas[_0x44680f(0xfd)],offscreenCanvas['height']=canvas[_0x44680f(0x155)];});let gameMode=a0_0x3f7af0(0x12b);const editModeSelectableBlocks=['block'];let editModeSelectedBlock=editModeSelectableBlocks[0x0],currentRoomIndex=0x0;const gridSpacing=0x20,mapSizePoint={'x':0x144c,'y':0xe28};let mouseDown=![],rightMouseDown=![],mousePoint={'x':0x0,'y':0x0},previousMousePoint={'x':0x0,'y':0x0},allLines=[],linesInView=[],particles=[],trailPoints=[],characterPoint={'x':0x584,'y':0xa84};characterPoint={'x':723.7213019579601,'y':1120.2587698375603};let previousCharacterPoint={'x':characterPoint['x'],'y':characterPoint['y']},characterSpriteXScale=0x1,characterSpriteRotation=0x0,characterSpriteImage=null,characterMode='platform',characterStance='jump',characterSpriteFrame=0x4,characterLine=null,characterLinePosition=0x0,dx=0x0,dy=0x0,angle=Math['PI']+0.7,releaseAngle=0x0,radius=0x0,angularVelocity=0x0,ropeSegments=[],ropeLength=0x0,orbitPoint=null,bulletPoint=null,previousBulletPoint=null,bulletAngle=null;const cameraLookaheadPoint={'x':0x0,'y':0x0};let cameraPoint={'x':characterPoint['x']+cameraLookaheadPoint['x'],'y':characterPoint['y']+cameraLookaheadPoint['y']},cameraTargetPoint={'x':characterPoint['x']+cameraLookaheadPoint['x'],'y':characterPoint['y']+cameraLookaheadPoint['y']},zoomLevel=null,previousCameraPoint={'x':0x0,'y':0x0};const viewPortMaxWidthInPixels=0x3e8,viewPortMinHeightInPixels=0x320;let characterTilePoint=null;const solidColor='rgb(0,\x200,\x200)',tileWidth=0x280,tileHeight=0x1e0,tiles={};let characterSpriteFrameTime=0x0,leftWall=null,rightWall=null,groundLine=null,wallJumpTimer=0x0,leftArrowKeyDown=![],leftArrowKeyPressed=![],rightArrowKeyDown=![],rightArrowKeyPressed=![],upArrowKeyDown=![],downArrowKeyDown=![],spacePressedCount=0x0,enterPressedCount=0x0,bKeyDown=![],previousTimestamp=null,stepAccumulator=0x0,stepCount=0x0,superStepCount=0x0,timeCount=0x0,timeCountStopped=![];const STEP_SIZE=0x3e8/0x3c,MAX_DELTA_TIME=0xfa;let animateStep=0x0,remainingSuperSteps=0x0;const imageFiles={'characterOrbit1':'sprites/Sprite-0001.png','characterOrbit2':'sprites/Sprite-0002.png','characterOrbit3':a0_0x3f7af0(0xf3),'characterOrbit4':'sprites/Sprite-0004.png','characterLand1':a0_0x3f7af0(0x13c),'characterStand1':a0_0x3f7af0(0xc0),'characterRun1':a0_0x3f7af0(0xd4),'characterRun2':a0_0x3f7af0(0x11a),'characterRun3':'sprites/Sprite-0009.png','characterRun4':a0_0x3f7af0(0xef),'characterRun5':a0_0x3f7af0(0xf2),'characterRun6':a0_0x3f7af0(0x157),'characterRun7':a0_0x3f7af0(0x148),'characterRun8':'sprites/Sprite-0014.png','characterJump1':a0_0x3f7af0(0x154),'characterJump2':'sprites/Sprite-0016.png','characterJump3':a0_0x3f7af0(0x102),'characterJump4':a0_0x3f7af0(0x17d),'characterJump5':a0_0x3f7af0(0x109),'characterJump6':a0_0x3f7af0(0x107),'characterWallSlide1':a0_0x3f7af0(0x134),'bullet':a0_0x3f7af0(0xb5)},soundFiles={'shoot':a0_0x3f7af0(0x17f),'attach':a0_0x3f7af0(0x191),'land':a0_0x3f7af0(0xd8),'impact':'sounds/Impact.wav','bounce11':a0_0x3f7af0(0x160)},audioContext=new(window[(a0_0x3f7af0(0xf0))]||window[(a0_0x3f7af0(0xb6))])(),audioBuffers={};let soundsLoaded=0x0;const totalSounds=Object[a0_0x3f7af0(0x161)](soundFiles)[a0_0x3f7af0(0x17a)];document[a0_0x3f7af0(0x142)](a0_0x3f7af0(0xeb),()=>{const _0x27c839=a0_0x3f7af0;console['log'](damping);const _0x2d35a1=[{'id':_0x27c839(0x177),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x177)))||damping,'default':damping,'min':0.9,'max':0x1,'info':_0x27c839(0x175)},{'id':_0x27c839(0xfb),'value':parseFloat(localStorage['getItem'](_0x27c839(0xfb)))||thrust,'default':thrust,'min':0.01,'max':0.4,'info':_0x27c839(0x18a)},{'id':'orbitGravity','value':parseFloat(localStorage['getItem'](_0x27c839(0xb4)))||orbitGravity,'default':orbitGravity,'min':0.1,'max':0x1,'info':_0x27c839(0x13d)},{'id':_0x27c839(0x173),'value':parseFloat(localStorage['getItem'](_0x27c839(0x173)))||descendThrust,'default':descendThrust,'min':0x1,'max':0xa,'info':_0x27c839(0x128)},{'id':_0x27c839(0xf7),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xf7)))||ascendThrust,'default':ascendThrust,'min':0x1,'max':0x8,'info':'Upward\x20thrust\x20when\x20rope\x20attached\x20(releasing\x20out)'},{'id':'maxRopeLength','value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xbb)))||maxRopeLength,'default':maxRopeLength,'min':0x64,'max':0x320,'info':_0x27c839(0x11b)},{'id':_0x27c839(0x18e),'value':parseFloat(localStorage['getItem']('minRopeLength'))||minRopeLength,'default':minRopeLength,'min':0x5,'max':0x64,'info':'Minimum\x20rope\x20length'},{'id':_0x27c839(0x11d),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x11d)))||maxOrbitalSpeed,'default':maxOrbitalSpeed,'min':0xa,'max':0x32,'info':_0x27c839(0xd1)},{'id':_0x27c839(0x181),'value':parseFloat(localStorage[_0x27c839(0x130)]('bulletSpeed'))||bulletSpeed,'default':bulletSpeed,'min':0x14,'max':0x50,'info':'Rope\x20shoot\x20speed'},{'id':_0x27c839(0xfe),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xfe)))||jumpVelocity,'default':jumpVelocity,'min':0x5,'max':0xa,'info':'Initial\x20vertical\x20speed\x20on\x20ground\x20jump\x20(Jump\x20height)'},{'id':'wallJumpVelocity','value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x176)))||wallJumpVelocity,'default':wallJumpVelocity,'min':0x4,'max':0x9,'info':_0x27c839(0x119)},{'id':_0x27c839(0x10c),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x10c)))||walkTopSpeed,'default':walkTopSpeed,'min':0x2,'max':0x7,'info':_0x27c839(0x168)},{'id':_0x27c839(0x135),'value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x135)))||airControlAcceleration,'default':airControlAcceleration,'min':0.1,'max':0.5,'info':_0x27c839(0xe8)},{'id':_0x27c839(0x183),'value':parseFloat(localStorage['getItem'](_0x27c839(0x183)))||wallBouncinessHigh,'default':wallBouncinessHigh,'min':0x1,'max':0x2,'info':'Bounce\x20factor\x20when\x20hitting\x20wall\x20while\x20actively\x20thrusting'},{'id':_0x27c839(0xbf),'value':parseFloat(localStorage[_0x27c839(0x130)]('wallBouncinessLow'))||wallBouncinessLow,'default':wallBouncinessLow,'min':0x0,'max':0x1,'info':_0x27c839(0xc4)},{'id':'characterRadius','value':parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x10a)))||characterRadius,'default':characterRadius,'min':0x5,'max':0x14,'info':_0x27c839(0xc5)}];damping=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x177)))||damping,thrust=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xfb)))||thrust,orbitGravity=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xb4)))||orbitGravity,descendThrust=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x173)))||descendThrust,ascendThrust=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xf7)))||ascendThrust,maxRopeLength=parseFloat(localStorage['getItem']('maxRopeLength'))||maxRopeLength,minRopeLength=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x18e)))||minRopeLength,maxOrbitalSpeed=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x11d)))||maxOrbitalSpeed,bulletSpeed=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x181)))||bulletSpeed,jumpVelocity=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0xfe)))||jumpVelocity,wallJumpVelocity=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x176)))||wallJumpVelocity,walkTopSpeed=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x10c)))||walkTopSpeed,airControlAcceleration=parseFloat(localStorage['getItem'](_0x27c839(0x135)))||airControlAcceleration,wallBouncinessHigh=parseFloat(localStorage[_0x27c839(0x130)](_0x27c839(0x183)))||wallBouncinessHigh,wallBouncinessLow=parseFloat(localStorage[_0x27c839(0x130)]('wallBouncinessLow'))||wallBouncinessLow,characterRadius=parseFloat(localStorage['getItem']('characterRadius'))||characterRadius;for(let _0x41740c of _0x2d35a1){const _0x33a984=document[_0x27c839(0xc1)](_0x27c839(0xf4));_0x33a984[_0x27c839(0x10b)]=_0x27c839(0x18d),_0x33a984['id']=_0x41740c['id'],_0x33a984['min']=_0x41740c[_0x27c839(0x149)],_0x33a984[_0x27c839(0xc7)]=_0x41740c[_0x27c839(0xc7)],_0x33a984[_0x27c839(0x147)]=(_0x41740c['max']-_0x41740c['min'])/0x64,_0x33a984[_0x27c839(0x11e)]=_0x41740c[_0x27c839(0x11e)];const _0x202304=document['createElement'](_0x27c839(0x180));_0x202304['for']=_0x41740c['id'],_0x202304[_0x27c839(0xb2)]=_0x41740c['id']+'\x20'+parseFloat(_0x33a984[_0x27c839(0x11e)])[_0x27c839(0xc9)](0x4),_0x202304[_0x27c839(0xb8)][_0x27c839(0x114)]=_0x27c839(0x112),document[_0x27c839(0x146)]('ui')['appendChild'](_0x202304),_0x202304[_0x27c839(0x166)]=_0x41740c[_0x27c839(0x12c)],_0x202304[_0x27c839(0xf5)]=_0x27c839(0x12c);const _0x52f6dd=document[_0x27c839(0xc1)](_0x27c839(0x132));_0x52f6dd[_0x27c839(0xb8)][_0x27c839(0x127)]=_0x27c839(0x112),_0x52f6dd[_0x27c839(0xb8)][_0x27c839(0x165)]=_0x27c839(0x13a),_0x52f6dd['style']['fontSize']=_0x27c839(0x137),_0x52f6dd[_0x27c839(0xb2)]=_0x27c839(0x14f),_0x52f6dd['addEventListener'](_0x27c839(0x120),()=>{const _0x5d2d3e=_0x27c839;eval(_0x41740c['id']+_0x5d2d3e(0xe1)+_0x41740c[_0x5d2d3e(0x10f)]+';'),eval('localStorage.setItem(\x22'+_0x41740c['id']+_0x5d2d3e(0x186)+_0x41740c[_0x5d2d3e(0x10f)]+');'),_0x33a984[_0x5d2d3e(0x11e)]=_0x41740c[_0x5d2d3e(0x10f)],_0x202304['innerText']=_0x41740c['id']+'\x20'+parseFloat(_0x33a984[_0x5d2d3e(0x11e)])[_0x5d2d3e(0xc9)](0x4);}),document[_0x27c839(0x146)]('ui')[_0x27c839(0xc6)](_0x52f6dd),document[_0x27c839(0x146)]('ui')[_0x27c839(0xc6)](document[_0x27c839(0xc1)]('br')),document[_0x27c839(0x146)]('ui')[_0x27c839(0xc6)](_0x33a984),document[_0x27c839(0x146)]('ui')['appendChild'](document[_0x27c839(0xc1)]('br')),_0x33a984[_0x27c839(0x142)](_0x27c839(0xf4),_0x19f18e=>{const _0x287f13=_0x27c839;eval(_0x41740c['id']+_0x287f13(0xe1)+_0x19f18e[_0x287f13(0x123)][_0x287f13(0x11e)]+';'),eval('localStorage.setItem(\x22'+_0x41740c['id']+_0x287f13(0x186)+_0x19f18e['target'][_0x287f13(0x11e)]+');'),_0x202304['innerText']=_0x41740c['id']+'\x20'+parseFloat(_0x33a984[_0x287f13(0x11e)])[_0x287f13(0xc9)](0x4);}),_0x33a984['addEventListener'](_0x27c839(0x153),()=>{_0x33a984['blur']();}),_0x33a984[_0x27c839(0xb8)][_0x27c839(0xfd)]='100%',document['getElementById']('ui')['style'][_0x27c839(0xe7)]=DEBUG?_0x27c839(0x17c):_0x27c839(0x178);}});function normalizeAngle(_0x39d1a5){return _0x39d1a5>Math['PI']*0x2&&(_0x39d1a5-=Math['PI']*0x2),_0x39d1a5<0x0&&(_0x39d1a5+=Math['PI']*0x2),_0x39d1a5;}function lineIntersectsLine(_0x1921b7,_0x5cdeeb,_0x4cc5ae,_0x1207c6){const _0x5d4846=(_0x1207c6['y']-_0x4cc5ae['y'])*(_0x5cdeeb['x']-_0x1921b7['x'])-(_0x1207c6['x']-_0x4cc5ae['x'])*(_0x5cdeeb['y']-_0x1921b7['y']);if(_0x5d4846===0x0)return null;const _0x2a9ea7=((_0x1207c6['x']-_0x4cc5ae['x'])*(_0x1921b7['y']-_0x4cc5ae['y'])-(_0x1207c6['y']-_0x4cc5ae['y'])*(_0x1921b7['x']-_0x4cc5ae['x']))/_0x5d4846,_0x6f481d=((_0x5cdeeb['x']-_0x1921b7['x'])*(_0x1921b7['y']-_0x4cc5ae['y'])-(_0x5cdeeb['y']-_0x1921b7['y'])*(_0x1921b7['x']-_0x4cc5ae['x']))/_0x5d4846;if(_0x2a9ea7>0x0&&_0x2a9ea7<0x1&&_0x6f481d>0x0&&_0x6f481d<0x1)return{'x':_0x1921b7['x']+_0x2a9ea7*(_0x5cdeeb['x']-_0x1921b7['x']),'y':_0x1921b7['y']+_0x2a9ea7*(_0x5cdeeb['y']-_0x1921b7['y'])};return null;}function blockLineSegments(_0x42a01d){const _0x5b384e=a0_0x3f7af0,_0x41e8e1={'x':_0x42a01d['x']-0xa,'y':_0x42a01d['y']+0xa},_0x1220d5={'x':_0x42a01d['x']+_0x42a01d[_0x5b384e(0xfd)]-0xa,'y':_0x42a01d['y']-0xa},_0x5577b7={'x':_0x42a01d['x']+_0x42a01d[_0x5b384e(0xfd)]+0xa,'y':_0x42a01d['y']+_0x42a01d[_0x5b384e(0x155)]-0xa},_0x34f17f={'x':_0x42a01d['x']+0xa,'y':_0x42a01d['y']+_0x42a01d['height']+0xa};return[{'startPoint':_0x41e8e1,'endPoint':_0x1220d5},{'startPoint':_0x1220d5,'endPoint':_0x5577b7},{'startPoint':_0x5577b7,'endPoint':_0x34f17f},{'startPoint':_0x34f17f,'endPoint':_0x41e8e1}];}function circleIntersectsLine(_0x212747,_0x3751fd,_0x32beea){const _0x1c98f8=a0_0x3f7af0,_0x388e15={'x':_0x32beea[_0x1c98f8(0xe2)]['x']-_0x32beea[_0x1c98f8(0x14d)]['x'],'y':_0x32beea[_0x1c98f8(0xe2)]['y']-_0x32beea[_0x1c98f8(0x14d)]['y']},_0x161f31={'x':_0x212747['x']-_0x32beea['startPoint']['x'],'y':_0x212747['y']-_0x32beea[_0x1c98f8(0x14d)]['y']},_0x512199=_0x161f31['x']*_0x388e15['x']+_0x161f31['y']*_0x388e15['y'],_0x199366=_0x388e15['x']*_0x388e15['x']+_0x388e15['y']*_0x388e15['y'];let _0x37d6f7=_0x199366===0x0?0x0:_0x512199/_0x199366;const _0x53e2f4=Math[_0x1c98f8(0xc7)](0x0,Math['min'](0x1,_0x37d6f7)),_0x450271=_0x32beea[_0x1c98f8(0x14d)]['x']+_0x53e2f4*_0x388e15['x'],_0x165014=_0x32beea['startPoint']['y']+_0x53e2f4*_0x388e15['y'],_0x55aa55=_0x450271-_0x212747['x'],_0x2c85b1=_0x165014-_0x212747['y'],_0x10f02c=_0x55aa55*_0x55aa55+_0x2c85b1*_0x2c85b1,_0x321142=_0x3751fd*_0x3751fd;if(_0x10f02c<=_0x321142)return{'x':_0x450271,'y':_0x165014};return null;}function distance(_0x129e75,_0x213761,_0x135ca5,_0x363fd8){return Math['sqrt']((_0x135ca5-_0x129e75)*(_0x135ca5-_0x129e75)+(_0x363fd8-_0x213761)*(_0x363fd8-_0x213761));}function animationStep(){const _0x5d18bc=a0_0x3f7af0;characterMode===_0x5d18bc(0x125)&&(characterSpriteFrame<0x4&&(characterSpriteFrameTime+=0x1,characterSpriteFrameTime>0xa&&(characterSpriteFrame+=0x1,characterSpriteFrameTime=0x0)),characterSpriteImage=images[_0x5d18bc(0x188)+characterSpriteFrame],characterSpriteRotation=angle+0x3*Math['PI']/0x2);characterMode===_0x5d18bc(0x124)&&(characterSpriteFrame>0x1&&(characterSpriteFrameTime+=0x1,characterSpriteFrameTime>0xa&&(characterSpriteFrame-=0x1,characterSpriteFrameTime=0x0)),characterSpriteImage=images[_0x5d18bc(0x188)+characterSpriteFrame],characterSpriteRotation+=dx*0.025);if(characterMode===_0x5d18bc(0x15e)){characterStance===_0x5d18bc(0x16d)&&(characterSpriteFrame=0x1,characterSpriteImage=images[_0x5d18bc(0x15f)+characterSpriteFrame],characterSpriteFrameTime+=0x1,characterSpriteFrameTime>0x10&&(characterStance='stand'));characterStance===_0x5d18bc(0xde)&&(characterSpriteRotation=0x0,leftArrowKeyDown&&(characterSpriteXScale=-0x1),rightArrowKeyDown&&(characterSpriteXScale=0x1),characterSpriteImage=images[_0x5d18bc(0x16c)],(leftArrowKeyDown||rightArrowKeyDown)&&(characterSpriteImage=images['characterRun'+characterSpriteFrame],characterSpriteFrameTime+=0x1,characterSpriteFrameTime>0x6&&(characterSpriteFrameTime=0x0,characterSpriteFrame+=0x1,characterSpriteFrame>0x8&&(characterSpriteFrame=0x1))));if(characterStance===_0x5d18bc(0x11f)){characterSpriteRotation=0x0;if(leftWall&&leftWall[_0x5d18bc(0xd5)]['y']<=wallJumpWallNormalYThreshold&&leftArrowKeyDown)characterSpriteFrame=0x1,characterSpriteImage=images[_0x5d18bc(0x14a)+characterSpriteFrame],characterSpriteXScale=-0x1,characterSpriteRotation=leftWall[_0x5d18bc(0x143)]+Math['PI']/0x2*0x3;else{if(rightWall&&rightWall[_0x5d18bc(0xd5)]['y']<=wallJumpWallNormalYThreshold&&rightArrowKeyDown)characterSpriteFrame=0x1,characterSpriteImage=images[_0x5d18bc(0x14a)+characterSpriteFrame],characterSpriteXScale=0x1,characterSpriteRotation=rightWall[_0x5d18bc(0x143)]+Math['PI']/0x2*0x1;else{leftArrowKeyDown&&(characterSpriteXScale=-0x1);rightArrowKeyDown&&(characterSpriteXScale=0x1);if(dy<-0x1)characterSpriteFrame=0x1;else{if(dy>=-0x1&&dy<-0.2)characterSpriteFrame=0x2;else{if(dy>=-0.2&&dy<=0.2)characterSpriteFrame=0x3;else{if(dy>0.2&&dy<=0x1)characterSpriteFrame=0x4;else dy>0x1&&(characterSpriteFrame=0x5);}}}characterSpriteImage=images['characterJump'+characterSpriteFrame];}}}}}function particleStep(){const _0xffadf3=a0_0x3f7af0;for(let _0x3a3181=particles[_0xffadf3(0x17a)]-0x1;_0x3a3181>=0x0;_0x3a3181--){let _0x36ddcd=particles[_0x3a3181];_0x36ddcd['step'](_0x36ddcd),_0x36ddcd['dead']&&particles[_0xffadf3(0xcb)](_0x3a3181,0x1);}}function ropeTrailStep(){const _0x366eba=a0_0x3f7af0;if(characterMode==='orbit'){stepCount%0x4===0x0&&(trailPoints[_0x366eba(0x169)]({'x':characterPoint['x']+characterRadius*Math[_0x366eba(0xec)](angle),'y':characterPoint['y']+characterRadius*Math[_0x366eba(0x15a)](angle)}),trailPoints['length']>0x6&&trailPoints[_0x366eba(0xff)]());;}else stepCount%0x2===0x0&&trailPoints['shift']();}function bulletStep(){const _0x1d7422=a0_0x3f7af0;bulletPoint&&(bulletPoint['x']+=bulletSpeed*Math[_0x1d7422(0xec)](bulletAngle),bulletPoint['y']+=bulletSpeed*Math[_0x1d7422(0x15a)](bulletAngle),distance(bulletPoint['x'],bulletPoint['y'],characterPoint['x'],characterPoint['y'])>maxRopeLength&&(bulletPoint=null));if(bulletPoint){let _0x41dcf9=null;for(let _0x59d0a2 of linesInView){let _0x127a96=lineIntersectsLine(characterPoint,bulletPoint,_0x59d0a2['startPoint'],_0x59d0a2[_0x1d7422(0xe2)]);_0x127a96&&(!_0x41dcf9?_0x41dcf9=_0x127a96:distance(characterPoint['x'],characterPoint['y'],_0x127a96['x'],_0x127a96['y'])<distance(characterPoint['x'],characterPoint['y'],_0x41dcf9['x'],_0x41dcf9['y'])&&(_0x41dcf9=_0x127a96));}if(_0x41dcf9){const _0x56f5cc=0.5;playSound('attach',{'playbackRate':0x1-_0x56f5cc/0x2+Math[_0x1d7422(0x101)]()*_0x56f5cc}),bulletPoint=null,characterMode=_0x1d7422(0x125),characterSpriteFrame=0x4;const _0x12ec30=Math[_0x1d7422(0x150)](characterPoint['y']-_0x41dcf9['y'],characterPoint['x']-_0x41dcf9['x']),_0x3b3d36={'x':Math[_0x1d7422(0xec)](_0x12ec30),'y':Math[_0x1d7422(0x15a)](_0x12ec30)};orbitPoint={'x':_0x41dcf9['x']+_0x3b3d36['x'],'y':_0x41dcf9['y']+_0x3b3d36['y']},radius=distance(orbitPoint['x'],orbitPoint['y'],characterPoint['x'],characterPoint['y']),radius<minRadius&&(radius=minRadius),angle=Math[_0x1d7422(0x150)](characterPoint['y']-orbitPoint['y'],characterPoint['x']-orbitPoint['x']),angle>Math['PI']*0x2&&(angle-=Math['PI']*0x2),angle<0x0&&(angle+=Math['PI']*0x2),angularVelocity=(dx*-Math[_0x1d7422(0x15a)](angle)+dy*Math[_0x1d7422(0xec)](angle))/radius,Math[_0x1d7422(0x152)](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x1d7422(0x17e)](angularVelocity)*maxOrbitalSpeed/radius);}}}function cameraStep(){const _0x2af3ab=a0_0x3f7af0;cameraTargetPoint={'x':characterPoint['x']+cameraLookaheadPoint['x'],'y':characterPoint['y']+cameraLookaheadPoint['y']};const _0x3b5d3e={'x':canvas[_0x2af3ab(0xfd)]/0x2/zoomLevel,'y':canvas[_0x2af3ab(0x155)]/0x2/zoomLevel},_0x4cba7c={'x':mapSizePoint['x']-canvas[_0x2af3ab(0xfd)]/0x2/zoomLevel,'y':mapSizePoint['y']-canvas[_0x2af3ab(0x155)]/0x2/zoomLevel};cameraTargetPoint['x']<_0x3b5d3e['x']&&(cameraTargetPoint['x']=_0x3b5d3e['x']);cameraTargetPoint['y']<_0x3b5d3e['y']&&(cameraTargetPoint['y']=_0x3b5d3e['y']);cameraTargetPoint['x']>_0x4cba7c['x']&&(cameraTargetPoint['x']=_0x4cba7c['x']);cameraTargetPoint['y']>_0x4cba7c['y']&&(cameraTargetPoint['y']=_0x4cba7c['y']);const _0x447109={'x':cameraTargetPoint['x']-cameraPoint['x'],'y':cameraTargetPoint['y']-cameraPoint['y']};let _0x502060={'x':Math[_0x2af3ab(0x17e)](_0x447109['x'])*Math[_0x2af3ab(0x152)](Math['pow'](_0x447109['x']*1.6,0x4))/Math['abs'](Math[_0x2af3ab(0x156)](canvas['width'],0x3)),'y':Math[_0x2af3ab(0x17e)](_0x447109['y'])*Math[_0x2af3ab(0x152)](Math[_0x2af3ab(0x156)](_0x447109['y']*1.6,0x4))/Math[_0x2af3ab(0x152)](Math[_0x2af3ab(0x156)](canvas['height'],0x3))};Math[_0x2af3ab(0x152)](_0x502060['x'])>cameraMaxSpeed&&(_0x502060['x']=Math[_0x2af3ab(0x17e)](_0x502060['x'])*cameraMaxSpeed),Math[_0x2af3ab(0x152)](_0x502060['y'])>cameraMaxSpeed&&(_0x502060['y']=Math['sign'](_0x502060['y'])*cameraMaxSpeed),cameraPoint['x']+=_0x502060['x'],cameraPoint['y']+=_0x502060['y'];}function a0_0x17cc(_0x45a9ff,_0x43ac0c){const _0x25ad97=a0_0x25ad();return a0_0x17cc=function(_0x17ccf4,_0x539709){_0x17ccf4=_0x17ccf4-0xb1;let _0x1153a9=_0x25ad97[_0x17ccf4];return _0x1153a9;},a0_0x17cc(_0x45a9ff,_0x43ac0c);}let rooms=null,roomsLoaded=![],roomShapes=[];function bresenhamLine(_0x41006a,_0x5b3c4c){const _0x4a8106=a0_0x3f7af0;var _0x5ef566=new Array(),_0x2fa1ae=_0x41006a['x'],_0x5b1bb4=_0x41006a['y'],_0x26c7ae=_0x5b3c4c['x'],_0xa47b40=_0x5b3c4c['y'],_0x4fe327=Math[_0x4a8106(0x152)](_0x26c7ae-_0x2fa1ae),_0x11891f=Math[_0x4a8106(0x152)](_0xa47b40-_0x5b1bb4),_0x2976b2=_0x2fa1ae<_0x26c7ae?0x1:-0x1,_0x192b11=_0x5b1bb4<_0xa47b40?0x1:-0x1,_0x40dc4e=_0x4fe327-_0x11891f;_0x5ef566[_0x4a8106(0x169)]({'y':_0x5b1bb4,'x':_0x2fa1ae});while(!(_0x2fa1ae==_0x26c7ae&&_0x5b1bb4==_0xa47b40)){var _0x3c8c10=_0x40dc4e<<0x1;_0x3c8c10>-_0x11891f&&(_0x40dc4e-=_0x11891f,_0x2fa1ae+=_0x2976b2),_0x3c8c10<_0x4fe327&&(_0x40dc4e+=_0x4fe327,_0x5b1bb4+=_0x192b11),_0x5ef566['push']({'y':_0x5b1bb4,'x':_0x2fa1ae});}return _0x5ef566;}function editModeStep(){const _0x466965=a0_0x3f7af0;if(mouseDown||rightMouseDown){!rooms[currentRoomIndex]&&(rooms[currentRoomIndex]=[[]]);const _0x3b257a={'x':Math[_0x466965(0xcf)](previousMousePoint['x']/gridSpacing),'y':Math['floor'](previousMousePoint['y']/gridSpacing)},_0x57902a={'x':Math[_0x466965(0xcf)](mousePoint['x']/gridSpacing),'y':Math[_0x466965(0xcf)](mousePoint['y']/gridSpacing)},_0x1e2ac6=bresenhamLine(_0x3b257a,_0x57902a);for(let _0x33f036 of _0x1e2ac6){const _0x43c631=_0x33f036['x'],_0x4d4268=_0x33f036['y'];!rooms[currentRoomIndex][_0x4d4268]&&(rooms[currentRoomIndex][_0x4d4268]=[]);const _0x91a513=0xa;if(mousePoint['x']<cameraPoint['x']-canvas[_0x466965(0xfd)]/zoomLevel/0x2+(gridSpacing+_0x91a513)/zoomLevel){const _0x46944e=Math[_0x466965(0xcf)]((mousePoint['y']-(cameraPoint['y']-canvas[_0x466965(0x155)]/0x2/zoomLevel)-_0x91a513/0x2/zoomLevel)/((gridSpacing+_0x91a513/0x2)/zoomLevel));_0x46944e>=0x0&&_0x46944e<editModeSelectableBlocks[_0x466965(0x17a)]&&(editModeSelectedBlock=editModeSelectableBlocks[_0x46944e]);}else rightMouseDown?rooms[currentRoomIndex][_0x4d4268][_0x43c631]=null:rooms[currentRoomIndex][_0x4d4268][_0x43c631]=editModeSelectedBlock;}localStorage[_0x466965(0xfa)](_0x466965(0x193),JSON[_0x466965(0x108)](rooms));}}function step(){const _0x64ddd6=a0_0x3f7af0;if(roomsLoaded===![]){roomsLoaded=!![],rooms=localStorage[_0x64ddd6(0x130)]('rooms');rooms&&(rooms=JSON[_0x64ddd6(0xcc)](rooms));;(rooms===null||rooms===undefined)&&(rooms=[]);}if(enterPressedCount>0x0){if(gameMode===_0x64ddd6(0x12b))gameMode='edit';else{gameMode=_0x64ddd6(0x12b),roomShapes=mapToShapes(rooms[currentRoomIndex]),linesInView=[];for(let _0x6f5dfd of roomShapes){for(let _0x1429a7 of _0x6f5dfd['lines']){const _0x49c47e={'x':_0x1429a7[_0x64ddd6(0xe2)]['x']*gridSpacing,'y':_0x1429a7['endPoint']['y']*gridSpacing},_0x4ff8d9={'x':_0x1429a7['startPoint']['x']*gridSpacing,'y':_0x1429a7['startPoint']['y']*gridSpacing},_0x564416=Math['atan2'](_0x49c47e['y']-_0x4ff8d9['y'],_0x49c47e['x']-_0x4ff8d9['x']),_0x59d149=distance(_0x49c47e['x'],_0x49c47e['y'],_0x4ff8d9['x'],_0x4ff8d9['y']),_0x1fa063={'x':Math[_0x64ddd6(0xec)](_0x564416-Math['PI']/0x2),'y':Math[_0x64ddd6(0x15a)](_0x564416-Math['PI']/0x2),'angle':_0x564416-Math['PI']/0x2},_0x180f6a=linesInView['length'];linesInView['push']({'startPoint':_0x4ff8d9,'endPoint':_0x49c47e,'angle':_0x564416,'index':_0x180f6a,'length':_0x59d149,'normal':_0x1fa063});}}}};gameMode===_0x64ddd6(0x171)&&editModeStep(),previousCharacterPoint={'x':characterPoint['x'],'y':characterPoint['y']},previousCameraPoint={'x':cameraPoint['x'],'y':cameraPoint['y']},previousBulletPoint=bulletPoint?{'x':bulletPoint['x'],'y':bulletPoint['y']}:null,previousMousePoint={'x':mousePoint['x'],'y':mousePoint['y']},animationStep(),particleStep(),ropeTrailStep(),bulletStep(),cameraStep(),characterMode==='orbit'?orbitStep():platformStep();}function a0_0x25ad(){const _0x3065c1=['characterRadius','type','walkTopSpeed','includes','start','default','56wZuDTC','KeyS','10px','querySelector','fontSize','arrayBuffer','body','text','round','Initial\x20vertical\x20speed\x20on\x20wall\x20jump\x20(Wall\x20jump\x20height)','sprites/Sprite-0008.png','Maximum\x20rope\x20length','ArrowDown','maxOrbitalSpeed','value','jump','click','mousedown','log','target','fly','orbit','connect','marginLeft','Downward\x20thrust\x20when\x20rope\x20attached\x20(pulling\x20in)','find','image','play','info','getBoundingClientRect','Solid','getAttribute','getItem','ArrowLeft','button','fillStyle','sprites/Sprite-0021.png','airControlAcceleration','shoot','8px','Found\x20element\x20with\x20id:\x20','debug','0px','All\x20sounds\x20loaded\x20with\x20Web\x20Audio\x20API','sprites/Sprite-0005.png','Gravity','Sound\x20\x27','location','getContext','documentElement','addEventListener','angle','fillText','innerHeight','getElementById','step','sprites/Sprite-0013.png','min','characterWallSlide','Multiple\x20orbit\x20points\x20with\x20same\x20angle\x20difference','KeyR','startPoint','split','Reset','atan2','createGain','abs','mouseleave','sprites/Sprite-0015.png','height','pow','sprites/Sprite-0012.png','code','error','sin','dead','KeyA','decodeAudioData','platform','characterLand','sounds/Deflect\x20SND117402-11.wav','keys','Space','28120180GuspHE','resize','padding','title','direction','Horizontal\x20speed\x20when\x20walking\x20on\x20ground','push','buffer','innerWidth','characterStand1','land','contextmenu','KeyB',',\x20got\x20','edit','ceil','descendThrust','color','Speed\x20preserved\x20when\x20rope\x20attached\x20(0.9\x20=\x20high\x20loss,\x201.0\x20=\x20no\x20loss)','wallJumpVelocity','damping','none','src','length','map','block','sprites/Sprite-0018.png','sign','sounds/221539__unfa__melee-attack-3-edited2.wav','label','bulletSpeed','canvas','wallBouncinessHigh','10zFJguz','419125oxaMLJ','\x22,\x20','TimeScale:\x20','characterOrbit','line','Left/right\x20thrust\x20when\x20rope\x20attached','825834KshoJU','No\x20shared\x20corner\x20found\x20for\x20two\x20intersections:','range','minRopeLength','then','destination','sounds/double-door-lock-101210-edited.wav','7668582WGxBZo','rooms','FPS:\x20','fake','red','innerText','status','orbitGravity','sprites/hook1.png','webkitAudioContext','ArrowUp','style','top','playbackRate','maxRopeLength','left','keydown','points','wallBouncinessLow','sprites/Sprite-0006.png','createElement','rgba(255,\x20255,\x20255,\x20','onload','Bounce\x20factor\x20when\x20hitting\x20wall\x20without\x20thrusting','Character\x20size\x20in\x20pixels','appendChild','max','857583qHxqis','toFixed','.png','splice','parse','ArrowRight','Space\x20pressed\x20count\x20>\x201:','floor','createBufferSource','Maximum\x20speed\x20when\x20rope\x20attached','KeyW','3389324eeQEHI','sprites/Sprite-0007.png','normal','More\x20than\x20two\x20intersections\x20detected:','warn','sounds/Impact2.wav','margin','16px\x20Arial','preventDefault','Solid-','keyup','stand','bounce11',':\x20expected\x20','\x20=\x20','endPoint','864568rKyxCi','gain','clientX','radius','display','Acceleration\x20for\x20horizontal\x20movement\x20in\x20air','7vQYWmk','10GWvfAw','DOMContentLoaded','cos','parseFromString','catch','sprites/Sprite-0010.png','AudioContext','KeyD','sprites/Sprite-0011.png','sprites/Sprite-0003.png','input','className','pop','ascendThrust','sqrt','HTTP\x20error!\x20status:\x20','setItem','thrust','No\x20points\x20found\x20for\x20Solid-','width','jumpVelocity','shift','image/svg+xml','random','sprites/Sprite-0017.png','life','children','trim','tiles/tile_','sprites/Sprite-0020.png','stringify','sprites/Sprite-0019.png'];a0_0x25ad=function(){return _0x3065c1;};return a0_0x25ad();}function platformStep(){const _0x43ef28=a0_0x3f7af0;wallJumpTimer>0x0&&(wallJumpTimer-=0x1);wallJumpTimer<0x0&&(wallJumpTimer+=0x1);let _0x2452f5=null;leftWall=null,rightWall=null;let _0x5d83d9=[];for(let _0x465611 of linesInView){const _0x6abf57=circleIntersectsLine(characterPoint,characterRadius+0x1,_0x465611);_0x6abf57&&_0x5d83d9[_0x43ef28(0x169)]({'point':_0x6abf57,'line':_0x465611});}_0x5d83d9['length']>0x2&&console[_0x43ef28(0x159)](_0x43ef28(0xd6),_0x5d83d9);if(_0x5d83d9[_0x43ef28(0x17a)]===0x2){let _0x16d0c0=null;_0x5d83d9[0x0][_0x43ef28(0x189)][_0x43ef28(0x14d)]['x']===_0x5d83d9[0x1]['line'][_0x43ef28(0xe2)]['x']&&_0x5d83d9[0x0]['line'][_0x43ef28(0x14d)]['y']===_0x5d83d9[0x1][_0x43ef28(0x189)][_0x43ef28(0xe2)]['y']&&(_0x16d0c0=_0x5d83d9[0x0][_0x43ef28(0x189)][_0x43ef28(0x14d)]);_0x5d83d9[0x0][_0x43ef28(0x189)][_0x43ef28(0xe2)]['x']===_0x5d83d9[0x1][_0x43ef28(0x189)][_0x43ef28(0x14d)]['x']&&_0x5d83d9[0x0][_0x43ef28(0x189)][_0x43ef28(0xe2)]['y']===_0x5d83d9[0x1][_0x43ef28(0x189)][_0x43ef28(0x14d)]['y']&&(_0x16d0c0=_0x5d83d9[0x0][_0x43ef28(0x189)]['endPoint']);if(_0x16d0c0==null)console[_0x43ef28(0x159)](_0x43ef28(0x18c),_0x5d83d9);else{}};let _0x20141e=null;for(let _0x51a4e6 of _0x5d83d9){const _0xfce988=_0x51a4e6[_0x43ef28(0x189)];if(_0xfce988[_0x43ef28(0xd5)]['y']<-0.5||_0xfce988[_0x43ef28(0x195)]){const _0x59e0d8=normalizeAngle(Math[_0x43ef28(0x150)](_0xfce988['normal']['y'],_0xfce988[_0x43ef28(0xd5)]['x'])),_0x149110=normalizeAngle(Math[_0x43ef28(0x150)](characterPoint['y']-_0x51a4e6['point']['y'],characterPoint['x']-_0x51a4e6['point']['x'])),_0x138016=_0x59e0d8-_0x149110;(_0x20141e===null||Math[_0x43ef28(0x152)](_0x138016)<Math['abs'](_0x20141e))&&(_0x2452f5=_0xfce988,_0x20141e=_0x138016);}else _0xfce988[_0x43ef28(0xd5)]['x']>0.5&&((characterPoint['x']-_0xfce988['startPoint']['x'])*_0xfce988[_0x43ef28(0xd5)]['x']+(characterPoint['y']-_0xfce988[_0x43ef28(0x14d)]['y'])*_0xfce988[_0x43ef28(0xd5)]['y']>0x0&&(leftWall=_0xfce988)),_0xfce988[_0x43ef28(0xd5)]['x']<-0.5&&((characterPoint['x']-_0xfce988[_0x43ef28(0x14d)]['x'])*_0xfce988[_0x43ef28(0xd5)]['x']+(characterPoint['y']-_0xfce988[_0x43ef28(0x14d)]['y'])*_0xfce988[_0x43ef28(0xd5)]['y']>0x0&&(rightWall=_0xfce988));};_0x2452f5&&Math[_0x43ef28(0x152)](_0x20141e)>0.5&&(_0x2452f5=null,dx-=Math[_0x43ef28(0x17e)](_0x20141e)*0.01);characterMode===_0x43ef28(0x15e)&&(!_0x2452f5&&characterStance!==_0x43ef28(0x16d)&&(characterStance=_0x43ef28(0x11f)));if(_0x2452f5&&dy>=0x0){characterStance!==_0x43ef28(0x16d)&&(characterStance='stand');;groundLine=_0x2452f5;}if(characterMode===_0x43ef28(0x124)){if(spacePressedCount>0x0){if(!bulletPoint){playSound(_0x43ef28(0x136)),bulletPoint={'x':characterPoint['x'],'y':characterPoint['y']},bulletAngle=normalizeAngle(Math['PI']*0x2-releaseAngle);if(bulletAngle>Math['PI']/0x2*0x3+bulletMaxAngleOffset||bulletAngle<Math['PI']/0x2)bulletAngle=Math['PI']/0x2*0x3+bulletMaxAngleOffset;else bulletAngle<Math['PI']/0x2*0x3-bulletMaxAngleOffset&&(bulletAngle=Math['PI']/0x2*0x3-bulletMaxAngleOffset);}}let _0x23e2dc=orbitGravity+(Math['pow'](0x1+Math['abs'](dx),0x2)-0x1)/Math[_0x43ef28(0x156)](0xa,0x3);dy<0x0&&(_0x23e2dc*=0.9),dy+=_0x23e2dc;}if(characterMode==='platform'){if(characterStance===_0x43ef28(0xde))dx=0x0,dy=0x0,leftArrowKeyDown&&(!leftWall&&(dx=-Math[_0x43ef28(0xec)](groundLine['angle'])*walkTopSpeed,dy=-Math[_0x43ef28(0x15a)](groundLine[_0x43ef28(0x143)])*walkTopSpeed)),rightArrowKeyDown&&(!rightWall&&(dx=Math[_0x43ef28(0xec)](groundLine['angle'])*walkTopSpeed,dy=Math['sin'](groundLine[_0x43ef28(0x143)])*walkTopSpeed)),spacePressedCount>0x0&&(dy=-jumpVelocity,characterStance=_0x43ef28(0x11f));else{if(characterStance===_0x43ef28(0x11f)){dy+=orbitGravity;!leftArrowKeyDown&&!rightArrowKeyDown&&!leftWall&&!rightWall&&(dx*=0.95);leftArrowKeyDown&&(!leftWall&&(dx>-walkTopSpeed&&(dx-=airControlAcceleration/-Math[_0x43ef28(0x149)](-0x1,wallJumpTimer/0x6))));rightArrowKeyDown&&(!rightWall&&(dx<walkTopSpeed&&(dx+=airControlAcceleration/Math['max'](0x1,wallJumpTimer/0x6))));if(spacePressedCount>0x0){if(leftWall&&leftWall['normal']['y']<=wallJumpWallNormalYThreshold&&leftArrowKeyDown)wallJumpTimer=-0x14,dy=-wallJumpVelocity,dx=walkTopSpeed;else rightWall&&rightWall[_0x43ef28(0xd5)]['y']<=wallJumpWallNormalYThreshold&&rightArrowKeyDown?(wallJumpTimer=0x14,dy=-wallJumpVelocity,dx=-walkTopSpeed):!bulletPoint&&(playSound(_0x43ef28(0x136)),bulletPoint={'x':characterPoint['x'],'y':characterPoint['y']},bulletAngle=Math['PI']/0x2*0x3,characterSpriteXScale===0x1&&(bulletAngle+=bulletMaxAngleOffset),characterSpriteXScale===-0x1&&(bulletAngle-=bulletMaxAngleOffset),upArrowKeyDown&&!leftArrowKeyDown&&!rightArrowKeyDown&&(bulletAngle=Math['PI']/0x2*0x3));}}}}const _0xfc1d29=Math['sqrt'](dx*dx+dy*dy),_0x29857e=Math['ceil'](_0xfc1d29/(characterRadius/0x2));for(let _0x451a03=0x0;_0x451a03<_0x29857e;_0x451a03++){const _0x58fd0b=Math[_0x43ef28(0xf8)](dx*dx+dy*dy);_0x58fd0b>0x1&&particles[_0x43ef28(0x169)]({'x':characterPoint['x'],'y':characterPoint['y'],'radius':0xc,'color':'rgba(255,\x20255,\x20255,\x200.01)','step':function(_0x4b9ff3){const _0x375177=_0x43ef28;_0x4b9ff3[_0x375177(0xe6)]-=0x1,_0x4b9ff3[_0x375177(0xe6)]<=0x0&&(_0x4b9ff3[_0x375177(0x15b)]=!![]);}});let _0x5c95d3=0x5;_0x324c03:while(!![]){const _0x3d1735={'x':characterPoint['x']+dx/_0x29857e,'y':characterPoint['y']+dy/_0x29857e};let _0x57ccd5=[];for(let _0x2ecc8d of linesInView){let _0x58e2f3=normalizeAngle(_0x2ecc8d[_0x43ef28(0x143)]+Math['PI']/0x2),_0x5df6f7=normalizeAngle(Math[_0x43ef28(0x150)](dy,dx)),_0x340f7e=_0x58e2f3-_0x5df6f7;_0x340f7e>Math['PI']&&(_0x340f7e-=Math['PI']*0x2);_0x340f7e<-Math['PI']&&(_0x340f7e+=Math['PI']*0x2);if(Math[_0x43ef28(0x152)](_0x340f7e)>=Math['PI']/0x2)continue;const _0xf2e2ee=circleIntersectsLine(_0x3d1735,characterRadius,_0x2ecc8d);if(_0xf2e2ee){const _0x45cac4=Math['atan2'](_0x2ecc8d['endPoint']['y']-_0x2ecc8d[_0x43ef28(0x14d)]['y'],_0x2ecc8d[_0x43ef28(0xe2)]['x']-_0x2ecc8d[_0x43ef28(0x14d)]['x']),_0x26b46c={'x':-Math['sin'](_0x45cac4),'y':Math['cos'](_0x45cac4)},_0x2b4b1e=dx*_0x26b46c['x']+dy*_0x26b46c['y'];_0x2b4b1e>0x0&&(_0x26b46c['x']=-_0x26b46c['x'],_0x26b46c['y']=-_0x26b46c['y']),_0x57ccd5[_0x43ef28(0x169)]({'point':_0xf2e2ee,'line':_0x2ecc8d,'normal':_0x26b46c});}};if(_0x57ccd5[_0x43ef28(0x17a)]===0x0){characterPoint=_0x3d1735;break _0x324c03;}for(let _0x468281 of _0x57ccd5){const _0x561b1b=_0x468281[_0x43ef28(0xd5)],_0x2f53bf=_0x468281['point'],_0x80082=dx*-_0x561b1b['x']+dy*-_0x561b1b['y'];if(characterMode==='fly'&&_0x80082<=0xf&&_0x561b1b['y']<-0.5)playSound(_0x43ef28(0x16d)),characterMode=_0x43ef28(0x15e),characterStance=_0x43ef28(0x16d),characterSpriteFrameTime=0x0,characterSpriteFrame=0x1,characterSpriteRotation=0x0,characterSpriteXScale=0x1,dx=0x0,dy=0x0;else{if(characterMode===_0x43ef28(0x124)&&_0x80082>0x5){const _0x108c1e=dx*_0x561b1b['x']+dy*_0x561b1b['y'];dx-=1.5*_0x108c1e*_0x561b1b['x'],dy-=1.5*_0x108c1e*_0x561b1b['y'],dx*=0.8,dy*=0.8,playSound('impact');const _0x442614=0x8;for(let _0x327462=0x0;_0x327462<_0x442614;_0x327462++){const _0x1eb099=Math['atan2'](_0x561b1b['y'],_0x561b1b['x']),_0x311247=Math['PI']*1.2,_0x589271=_0x1eb099-_0x311247/0x2+_0x311247/(_0x442614-0x1)*_0x327462,_0x5a32e4=0.4;particles[_0x43ef28(0x169)]({'x':_0x2f53bf['x']+Math['random']()*characterRadius*0x3-characterRadius*0x3/0x2,'y':_0x2f53bf['y']+Math['random']()*characterRadius*0x3-characterRadius*0x3/0x2,'dx':Math[_0x43ef28(0xec)](_0x589271)*_0x5a32e4,'dy':Math['sin'](_0x589271)*_0x5a32e4,'radius':0x2,'life':0xe,'color':solidColor,'step':function(_0x3dcb25){const _0x1dfbb1=_0x43ef28;_0x3dcb25[_0x1dfbb1(0x103)]--,_0x3dcb25[_0x1dfbb1(0x103)]<=0x0&&(_0x3dcb25['dead']=!![]),_0x3dcb25['dy']+=0.1,_0x3dcb25['x']+=_0x3dcb25['dx'],_0x3dcb25['y']+=_0x3dcb25['dy'];}});}}else{const _0x1b2ea=distance(_0x3d1735['x'],_0x3d1735['y'],_0x468281['point']['x'],_0x468281['point']['y']),_0x117027={'x':(_0x468281[_0x43ef28(0x189)][_0x43ef28(0xe2)]['x']-_0x468281[_0x43ef28(0x189)][_0x43ef28(0x14d)]['x'])/_0x468281[_0x43ef28(0x189)]['length'],'y':(_0x468281['line'][_0x43ef28(0xe2)]['y']-_0x468281[_0x43ef28(0x189)]['startPoint']['y'])/_0x468281[_0x43ef28(0x189)]['length']},_0x66f2ef=dx*_0x117027['x']+dy*_0x117027['y'];dx=_0x117027['x']*_0x66f2ef,dy=_0x117027['y']*_0x66f2ef;}}}_0x5c95d3-=0x1;if(_0x5c95d3<=0x0){console[_0x43ef28(0x159)]('Max\x20tries\x20exceeded\x20in\x20platformer\x20collision\x20('+dx+',\x20'+dy+')');break _0x324c03;}}}}function orbitStep(){const _0x2442ee=a0_0x3f7af0;let _0x21421b=radius,_0xc7532f={'x':orbitPoint['x'],'y':orbitPoint['y']};leftArrowKeyPressed&&(characterSpriteXScale=-0x1);rightArrowKeyPressed&&(characterSpriteXScale=0x1);!leftArrowKeyPressed&&!rightArrowKeyPressed&&!(leftArrowKeyDown&&rightArrowKeyDown)&&(leftArrowKeyDown&&(characterSpriteXScale=-0x1),rightArrowKeyDown&&(characterSpriteXScale=0x1));leftArrowKeyDown&&(angle<Math['PI']?angularVelocity+=Math[_0x2442ee(0x15a)](angle)*thrust/radius:angularVelocity-=Math[_0x2442ee(0x15a)](angle)*thrust/radius);rightArrowKeyDown&&(angle<Math['PI']?angularVelocity-=Math[_0x2442ee(0x15a)](angle)*thrust/radius:angularVelocity+=Math[_0x2442ee(0x15a)](angle)*thrust/radius);Math[_0x2442ee(0x152)](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x2442ee(0x17e)](angularVelocity)*maxOrbitalSpeed/radius);let _0x4be15d=0x0;upArrowKeyDown&&(_0x4be15d-=ascendThrust);downArrowKeyDown&&(_0x4be15d+=descendThrust);if(_0x4be15d!==0x0){let _0x2a6648={'x':orbitPoint['x']+(radius+_0x4be15d)*Math[_0x2442ee(0xec)](angle),'y':orbitPoint['y']+(radius+_0x4be15d)*Math['sin'](angle)},_0x3a60cd=null;for(let _0x2845dc of linesInView){_0x3a60cd=circleIntersectsLine(_0x2a6648,characterRadius,_0x2845dc);if(_0x3a60cd)break;}!_0x3a60cd&&(radius+=_0x4be15d,radius+ropeLength>maxRopeLength&&(radius=maxRopeLength-ropeLength),radius+ropeLength<minRopeLength&&(radius=minRopeLength-ropeLength),angularVelocity*=Math[_0x2442ee(0x156)](_0x21421b/radius,0x2),Math[_0x2442ee(0x152)](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x2442ee(0x17e)](angularVelocity)*maxOrbitalSpeed/radius));}angularVelocity+=Math[_0x2442ee(0xec)](angle)*orbitGravity/radius,angularVelocity*=damping;Math[_0x2442ee(0x152)](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x2442ee(0x17e)](angularVelocity)*maxOrbitalSpeed/radius);const _0x49cf98=Math['abs'](angularVelocity*radius),_0x4694fb=Math[_0x2442ee(0x172)](_0x49cf98/(characterRadius/0x2));for(let _0x223615=0x0;_0x223615<_0x4694fb;_0x223615++){const _0x1ea11c=angle;angle+=angularVelocity/_0x4694fb;angle>Math['PI']*0x2&&(angle-=Math['PI']*0x2);angle<0x0&&(angle+=Math['PI']*0x2);characterPoint['x']=orbitPoint['x']+radius*Math[_0x2442ee(0xec)](angle),characterPoint['y']=orbitPoint['y']+radius*Math[_0x2442ee(0x15a)](angle);for(let _0x3b1f63 of linesInView){let _0x310e96=circleIntersectsLine(characterPoint,characterRadius,_0x3b1f63);if(_0x310e96){angle=_0x1ea11c;leftArrowKeyDown||rightArrowKeyDown?angularVelocity=-angularVelocity*wallBouncinessHigh:angularVelocity=-angularVelocity*wallBouncinessLow;Math[_0x2442ee(0x152)](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x2442ee(0x17e)](angularVelocity)*maxOrbitalSpeed/radius);characterPoint['x']=orbitPoint['x']+radius*Math[_0x2442ee(0xec)](angle),characterPoint['y']=orbitPoint['y']+radius*Math['sin'](angle);const _0x33b5b3=Math[_0x2442ee(0x150)](_0x3b1f63[_0x2442ee(0xe2)]['y']-_0x3b1f63['startPoint']['y'],_0x3b1f63[_0x2442ee(0xe2)]['x']-_0x3b1f63[_0x2442ee(0x14d)]['x']),_0x1bf364=particles[_0x2442ee(0x129)](_0xc1f1f2=>Math[_0x2442ee(0xcf)](_0xc1f1f2['x'])==Math[_0x2442ee(0xcf)](_0x310e96['x'])&&Math[_0x2442ee(0xcf)](_0xc1f1f2['y'])==Math[_0x2442ee(0xcf)](_0x310e96['y'])&&_0xc1f1f2['radius']<0x46),_0x5341ba=Math[_0x2442ee(0x152)](angularVelocity)*radius;if(!_0x1bf364&&_0x5341ba>0x1){leftArrowKeyDown||rightArrowKeyDown?(characterSpriteFrame=0x1,playSound(_0x2442ee(0xdf),{'playbackRate':1.3})):playSound(_0x2442ee(0xdf),{'playbackRate':0.9,'volume':Math['min'](0x5*_0x5341ba/maxOrbitalSpeed,0x1)});const _0x1a9ba0=0.2;particles[_0x2442ee(0x169)]({'x':_0x310e96['x'],'y':_0x310e96['y'],'radius':characterRadius,'color':_0x2442ee(0xc2)+_0x1a9ba0+')','step':function(_0x4514d4){const _0x1410bd=_0x2442ee,_0x441af2=Math['min'](Math[_0x1410bd(0x152)](angularVelocity)*radius*0xa,0x46);_0x4514d4[_0x1410bd(0xe6)]+=(_0x441af2-_0x4514d4[_0x1410bd(0xe6)])/0xa;const _0x1ed2e7=Math[_0x1410bd(0xc7)](0x0,_0x1a9ba0*(0x1-_0x4514d4['radius']/_0x441af2));_0x4514d4[_0x1410bd(0x174)]='rgba(255,\x20255,\x20255,\x20'+_0x1ed2e7+')',_0x4514d4[_0x1410bd(0xe6)]>_0x441af2-0.5&&(_0x4514d4[_0x1410bd(0x15b)]=!![]);}});}}}if(ropeSegments[_0x2442ee(0x17a)]>0x0){let _0x5b3e07={'x':ropeSegments[ropeSegments[_0x2442ee(0x17a)]-0x1]?.[_0x2442ee(0x14d)]['x'],'y':ropeSegments[ropeSegments[_0x2442ee(0x17a)]-0x1]?.[_0x2442ee(0x14d)]['y']},_0x257544=Math['atan2'](ropeSegments[ropeSegments['length']-0x1]?.[_0x2442ee(0xe2)]['y']-ropeSegments[ropeSegments['length']-0x1]?.[_0x2442ee(0x14d)]['y'],ropeSegments[ropeSegments[_0x2442ee(0x17a)]-0x1]?.[_0x2442ee(0xe2)]['x']-ropeSegments[ropeSegments[_0x2442ee(0x17a)]-0x1]?.[_0x2442ee(0x14d)]['x']),_0x2816d1=angle-_0x257544;_0x2816d1>Math['PI']&&(_0x2816d1-=Math['PI']*0x2),_0x2816d1<-Math['PI']&&(_0x2816d1+=Math['PI']*0x2),Math[_0x2442ee(0x17e)](_0x2816d1)===ropeSegments[ropeSegments['length']-0x1]?.[_0x2442ee(0x167)]&&(orbitPoint={'x':_0x5b3e07['x'],'y':_0x5b3e07['y']},radius=distance(orbitPoint['x'],orbitPoint['y'],characterPoint['x'],characterPoint['y']),radius<minRadius&&(radius=minRadius),angularVelocity=_0x21421b*angularVelocity/radius,Math['abs'](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math[_0x2442ee(0x17e)](angularVelocity)*maxOrbitalSpeed/radius),ropeSegments[_0x2442ee(0xf6)](),ropeLength-=distance(_0xc7532f['x'],_0xc7532f['y'],orbitPoint['x'],orbitPoint['y']));}let _0x5b340b=null;const _0x28962a=[];for(let _0x5e341d of linesInView){const _0x461af7=lineIntersectsLine(orbitPoint,characterPoint,_0x5e341d[_0x2442ee(0x14d)],_0x5e341d['endPoint']);_0x461af7&&(_0x28962a[_0x2442ee(0x169)]({'x':_0x5e341d[_0x2442ee(0x14d)]['x'],'y':_0x5e341d[_0x2442ee(0x14d)]['y'],'distance':distance(_0x461af7['x'],_0x461af7['y'],_0x5e341d[_0x2442ee(0x14d)]['x'],_0x5e341d['startPoint']['y'])}),_0x28962a['push']({'x':_0x5e341d['endPoint']['x'],'y':_0x5e341d[_0x2442ee(0xe2)]['y'],'distance':distance(_0x461af7['x'],_0x461af7['y'],_0x5e341d[_0x2442ee(0xe2)]['x'],_0x5e341d['endPoint']['y'])}));}for(let _0x5adf21=0x0;_0x5adf21<_0x28962a[_0x2442ee(0x17a)];_0x5adf21++){for(let _0x218512=_0x5adf21+0x1;_0x218512<_0x28962a[_0x2442ee(0x17a)];_0x218512++){_0x28962a[_0x5adf21]['x']===_0x28962a[_0x218512]['x']&&_0x28962a[_0x5adf21]['y']===_0x28962a[_0x218512]['y']&&(_0x28962a[_0x2442ee(0xcb)](_0x218512,0x1),_0x218512--);}}let _0x51719f=null,_0x53f3b6=null;for(let _0x2fb026 of _0x28962a){let _0x2603c3=Math[_0x2442ee(0x150)](_0x2fb026['y']-orbitPoint['y'],_0x2fb026['x']-orbitPoint['x']),_0x3b364c=_0x2603c3-angle;_0x3b364c>Math['PI']&&(_0x3b364c-=Math['PI']*0x2);_0x3b364c<-Math['PI']&&(_0x3b364c+=Math['PI']*0x2);Math[_0x2442ee(0x17e)](_0x3b364c)===Math[_0x2442ee(0x17e)](angularVelocity)&&(_0x3b364c=0x0);_0x51719f&&Math[_0x2442ee(0x152)](_0x3b364c)===Math[_0x2442ee(0x152)](_0x51719f)&&console[_0x2442ee(0x159)](_0x2442ee(0x14b));;(!_0x51719f||Math['abs'](_0x3b364c)>Math['abs'](_0x51719f))&&(_0x51719f=_0x3b364c,_0x53f3b6=_0x2fb026);}if(_0x53f3b6){orbitPoint=_0x53f3b6,radius=distance(orbitPoint['x'],orbitPoint['y'],characterPoint['x'],characterPoint['y']);radius<minRadius&&(radius=minRadius);angularVelocity=_0x21421b*angularVelocity/radius;Math['abs'](angularVelocity)*radius>maxOrbitalSpeed&&(angularVelocity=Math['sign'](angularVelocity)*maxOrbitalSpeed/radius);let _0x14032d=_0x1ea11c-angle;_0x14032d>Math['PI']&&(_0x14032d-=Math['PI']*0x2),_0x14032d<-Math['PI']&&(_0x14032d+=Math['PI']*0x2),ropeSegments[_0x2442ee(0x169)]({'startPoint':{'x':_0xc7532f['x'],'y':_0xc7532f['y']},'endPoint':{'x':orbitPoint['x'],'y':orbitPoint['y']},'direction':Math['sign'](_0x14032d)}),ropeLength+=distance(_0xc7532f['x'],_0xc7532f['y'],orbitPoint['x'],orbitPoint['y']);}}spacePressedCount>0x0&&(releaseAngle=angle,characterMode=_0x2442ee(0x124),ropeSegments=[],ropeLength=0x0,dx=angularVelocity*radius*-Math[_0x2442ee(0x15a)](angle)+_0x4be15d*Math[_0x2442ee(0xec)](angle),dy=angularVelocity*radius*Math[_0x2442ee(0xec)](angle)+_0x4be15d*Math[_0x2442ee(0x15a)](angle));}window[a0_0x3f7af0(0x142)](a0_0x3f7af0(0xbd),_0x17f000=>{const _0x56620a=a0_0x3f7af0;(_0x17f000['code']===_0x56620a(0x131)||_0x17f000['code']===_0x56620a(0x15c))&&(leftArrowKeyDown=!![],leftArrowKeyPressed=!![]),(_0x17f000[_0x56620a(0x158)]===_0x56620a(0xcd)||_0x17f000[_0x56620a(0x158)]===_0x56620a(0xf1))&&(rightArrowKeyDown=!![],rightArrowKeyPressed=!![]),(_0x17f000[_0x56620a(0x158)]===_0x56620a(0xb7)||_0x17f000[_0x56620a(0x158)]===_0x56620a(0xd2))&&(upArrowKeyDown=!![]),(_0x17f000[_0x56620a(0x158)]===_0x56620a(0x11c)||_0x17f000[_0x56620a(0x158)]==='KeyS')&&(downArrowKeyDown=!![]),_0x17f000[_0x56620a(0x158)]===_0x56620a(0x162)&&(spacePressedCount+=0x1),_0x17f000[_0x56620a(0x158)]==='KeyB'&&(bKeyDown=!![]),_0x17f000['code']===_0x56620a(0x14c)&&(timeCountStopped=![],stepCount=0x0,characterPoint={'x':0x10e,'y':0x163},cameraPoint={'x':0x10e,'y':0x163},dx=0x0,dy=0x0,angle=Math['PI']+0.7,angularVelocity=0x0,characterMode='fly',orbitPoint=null,ropeSegments=[],ropeLength=0x0,bulletPoint=null,bulletAngle=null);}),window[a0_0x3f7af0(0x142)](a0_0x3f7af0(0xdd),_0x312be2=>{const _0x2670de=a0_0x3f7af0;(_0x312be2[_0x2670de(0x158)]===_0x2670de(0x131)||_0x312be2[_0x2670de(0x158)]===_0x2670de(0x15c))&&(leftArrowKeyDown=![]),(_0x312be2[_0x2670de(0x158)]===_0x2670de(0xcd)||_0x312be2[_0x2670de(0x158)]===_0x2670de(0xf1))&&(rightArrowKeyDown=![]),(_0x312be2[_0x2670de(0x158)]===_0x2670de(0xb7)||_0x312be2[_0x2670de(0x158)]===_0x2670de(0xd2))&&(upArrowKeyDown=![]),(_0x312be2[_0x2670de(0x158)]===_0x2670de(0x11c)||_0x312be2[_0x2670de(0x158)]===_0x2670de(0x111))&&(downArrowKeyDown=![]),_0x312be2[_0x2670de(0x158)]===_0x2670de(0x16f)&&(bKeyDown=![]);}),window['addEventListener'](a0_0x3f7af0(0x121),_0x38cbef=>{const _0x45b709=a0_0x3f7af0;_0x38cbef[_0x45b709(0x132)]===0x0&&(mouseDown=!![]),_0x38cbef[_0x45b709(0x132)]===0x2&&(rightMouseDown=!![]);}),window[a0_0x3f7af0(0x142)](a0_0x3f7af0(0x16e),_0x49a13=>{const _0x127cca=a0_0x3f7af0;return _0x49a13[_0x127cca(0xdb)](),![];}),window[a0_0x3f7af0(0x142)]('mouseup',_0x5dcb9b=>{const _0x5c065b=a0_0x3f7af0;_0x5dcb9b[_0x5c065b(0x132)]===0x0&&(mouseDown=![]),_0x5dcb9b['button']===0x2&&(rightMouseDown=![]);}),window[a0_0x3f7af0(0x142)]('mousemove',_0x217731=>{const _0x182086=a0_0x3f7af0,_0x5a7d25=canvas[_0x182086(0x12d)](),_0x114eff=(_0x217731[_0x182086(0xe5)]-_0x5a7d25[_0x182086(0xbc)])*(canvas[_0x182086(0xfd)]/_0x5a7d25[_0x182086(0xfd)]),_0x249bae=(_0x217731['clientY']-_0x5a7d25[_0x182086(0xb9)])*(canvas[_0x182086(0x155)]/_0x5a7d25[_0x182086(0x155)]);mousePoint['x']=cameraPoint['x']-canvas[_0x182086(0xfd)]/0x2/zoomLevel+_0x114eff/zoomLevel,mousePoint['y']=cameraPoint['y']-canvas[_0x182086(0x155)]/0x2/zoomLevel+_0x249bae/zoomLevel;});function animate(_0x12983d){const _0x5dae63=a0_0x3f7af0;if(!previousTimestamp)previousTimestamp=_0x12983d;let _0x24c07d=_0x12983d-previousTimestamp;_0x24c07d>MAX_DELTA_TIME&&(_0x24c07d=MAX_DELTA_TIME);characterMode===_0x5dae63(0x124)?timeScale=0x1:timeScale=0x1;const _0x124ca9=_0x24c07d*timeScale;stepAccumulator+=_0x124ca9;while(stepAccumulator>=STEP_SIZE){stepAccumulator-=STEP_SIZE,step(),stepCount++,spacePressedCount>0x1&&console[_0x5dae63(0xd7)](_0x5dae63(0xce),spacePressedCount),spacePressedCount>0x0&&(spacePressedCount-=0x1),enterPressedCount>0x0&&(enterPressedCount-=0x1),leftArrowKeyPressed=![],rightArrowKeyPressed=![];}const _0x15bf47=stepAccumulator/STEP_SIZE;render(_0x15bf47),_0x12983d&&(ctx[_0x5dae63(0x133)]=_0x5dae63(0xb1),ctx['font']=_0x5dae63(0xda),ctx['fillText'](_0x5dae63(0x194)+Math[_0x5dae63(0x118)](0x3e8/_0x24c07d),0x1e,0x14),ctx[_0x5dae63(0x144)](_0x5dae63(0x187)+timeScale[_0x5dae63(0xc9)](0x2),0x1e,0x28)),previousTimestamp=_0x12983d,requestAnimationFrame(animate);}function loadSound(_0x54c99e,_0x244c10){const _0x131466=a0_0x3f7af0;fetch(_0x244c10)['then'](_0x4abf27=>{const _0x4601f5=a0_0x17cc;if(!_0x4abf27['ok'])throw new Error(_0x4601f5(0xf9)+_0x4abf27[_0x4601f5(0xb3)]);return _0x4abf27[_0x4601f5(0x115)]();})[_0x131466(0x18f)](_0x593779=>audioContext[_0x131466(0x15d)](_0x593779))[_0x131466(0x18f)](_0x265c16=>{const _0x24c227=_0x131466;audioBuffers[_0x54c99e]=_0x265c16,soundsLoaded++,soundsLoaded===totalSounds&&console[_0x24c227(0x122)](_0x24c227(0x13b));})[_0x131466(0xee)](_0x5ee95e=>{const _0xeeedb2=_0x131466;console[_0xeeedb2(0x159)]('Error\x20loading\x20or\x20decoding\x20sound\x20\x27'+_0x54c99e+'\x27:',_0x5ee95e);});}function playSound(_0xce6222,_0x40176c){const _0x35f99a=a0_0x3f7af0;_0x40176c=_0x40176c||{};const _0x410e66=audioBuffers[_0xce6222];if(_0x410e66){const _0x3516df=audioContext[_0x35f99a(0xd0)](),_0x29812b=audioContext[_0x35f99a(0x151)]();_0x29812b[_0x35f99a(0xe4)][_0x35f99a(0x11e)]=_0x40176c['volume']||0x1,_0x29812b[_0x35f99a(0x126)](audioContext[_0x35f99a(0x190)]),_0x3516df[_0x35f99a(0x126)](_0x29812b),_0x3516df[_0x35f99a(0x16a)]=_0x410e66,_0x3516df[_0x35f99a(0xba)][_0x35f99a(0x11e)]=_0x40176c['playbackRate']||0x1,_0x3516df[_0x35f99a(0x10e)](0x0);}else console[_0x35f99a(0xd7)](_0x35f99a(0x13e)+_0xce6222+'\x27\x20not\x20loaded\x20yet\x20or\x20doesn\x27t\x20exist.');}for(let key in soundFiles){loadSound(key,soundFiles[key]);}const images={};let imagesLoaded=0x0;const totalImages=Object[a0_0x3f7af0(0x161)](imageFiles)[a0_0x3f7af0(0x17a)];for(let key in imageFiles){images[key]=new Image(),images[key][a0_0x3f7af0(0x179)]=imageFiles[key],images[key][a0_0x3f7af0(0xc3)]=()=>{imagesLoaded++,imagesLoaded===totalImages&&console['log']('All\x20images\x20loaded');};}document[a0_0x3f7af0(0x142)](a0_0x3f7af0(0xeb),()=>{requestAnimationFrame(animate);});function getTileKeysInView(){const _0x169fa6=a0_0x3f7af0,_0x525053=canvas[_0x169fa6(0xfd)]/zoomLevel,_0x41279c=canvas[_0x169fa6(0x155)]/zoomLevel,_0x52ab8b=tileWidth,_0x57f9dd=tileHeight,_0x116665={'x':cameraPoint['x']-_0x525053/0x2-_0x52ab8b,'y':cameraPoint['y']-_0x41279c/0x2-_0x57f9dd},_0x43b930={'x':cameraPoint['x']+_0x525053/0x2+_0x52ab8b,'y':cameraPoint['y']+_0x41279c/0x2+_0x57f9dd},_0x5103f0={'x':Math['floor'](_0x116665['x']/tileWidth),'y':Math['floor'](_0x116665['y']/tileHeight)},_0x133427={'x':Math[_0x169fa6(0xcf)](_0x43b930['x']/tileWidth),'y':Math[_0x169fa6(0xcf)](_0x43b930['y']/tileHeight)},_0x4a00a7=[];for(let _0xc2247=_0x5103f0['y'];_0xc2247<=_0x133427['y'];_0xc2247++){for(let _0x280213=_0x5103f0['x'];_0x280213<=_0x133427['x'];_0x280213++){_0x280213>=0x0&&_0xc2247>=0x0&&_0x4a00a7[_0x169fa6(0x169)](_0x280213+','+_0xc2247);}}return _0x4a00a7;}function refreshTiles(){const _0x222795=a0_0x3f7af0,_0x3e6b97=getTileKeysInView();for(let _0x1d9698 of _0x3e6b97){if(!tiles[_0x1d9698]){const [_0x48eee4,_0x170980]=_0x1d9698[_0x222795(0x14e)](',')[_0x222795(0x17b)](Number);tiles[_0x1d9698]={'x':_0x48eee4*tileWidth,'y':_0x170980*tileHeight,'image':null};const _0x17f38b=new Image();_0x17f38b[_0x222795(0x179)]=_0x222795(0x106)+_0x48eee4+'-'+_0x170980+_0x222795(0xca),_0x17f38b[_0x222795(0xc3)]=()=>{const _0x19185b=_0x222795;tiles[_0x1d9698]&&((tileWidth!=_0x17f38b['width']||tileHeight!=_0x17f38b['height'])&&console['warn']('Tile\x20size\x20mismatch\x20for\x20tile\x20'+_0x48eee4+','+_0x170980+_0x19185b(0xe0)+tileWidth+'x'+tileHeight+_0x19185b(0x170)+_0x17f38b[_0x19185b(0xfd)]+'x'+_0x17f38b[_0x19185b(0x155)]),tiles[_0x1d9698][_0x19185b(0x12a)]=_0x17f38b);};}}for(let _0x1550c0 of Object['keys'](tiles)){!_0x3e6b97[_0x222795(0x10d)](_0x1550c0)&&(tiles[_0x1550c0][_0x222795(0x12a)]=null,delete tiles[_0x1550c0]);}}let svgDoc=null;fetch('map_map.svg')['then'](_0x27567c=>_0x27567c[a0_0x3f7af0(0x117)]())[a0_0x3f7af0(0x18f)](_0x26ed9b=>{const _0x118d48=a0_0x3f7af0,_0x3f48f9=new DOMParser();svgDoc=_0x3f48f9[_0x118d48(0xed)](_0x26ed9b,_0x118d48(0x100));function _0x2c7913(_0x7b1098){const _0x593556=_0x118d48;_0x7b1098['id']&&console['log'](_0x593556(0x138)+_0x7b1098['id']);for(let _0x41b4a5 of _0x7b1098['children']){_0x2c7913(_0x41b4a5);}}_0x2c7913(svgDoc[_0x118d48(0x141)]);for(let _0x2d43e7=0x1;_0x2d43e7<0x64;_0x2d43e7++){let _0x361f79;_0x2d43e7==0x1?_0x361f79=svgDoc['getElementById'](_0x118d48(0x12e)):_0x361f79=svgDoc[_0x118d48(0x146)](_0x118d48(0xdc)+_0x2d43e7);if(!_0x361f79)break;let _0x5d2eb0=null;_0x361f79&&_0x361f79[_0x118d48(0x12f)](_0x118d48(0xbe))&&(_0x5d2eb0=_0x361f79['getAttribute']('points'));_0x361f79[_0x118d48(0x104)][0x0]&&_0x361f79['children'][0x0][_0x118d48(0x12f)](_0x118d48(0xbe))&&(_0x5d2eb0=_0x361f79[_0x118d48(0x104)][0x0][_0x118d48(0x12f)](_0x118d48(0xbe)));if(!_0x5d2eb0){console[_0x118d48(0xd7)](_0x118d48(0xfc)+_0x2d43e7);continue;}const _0x23405e=pointsToLineSegments(_0x5d2eb0);allLines=allLines['concat'](_0x23405e);}linesInView=allLines;});function pointsToLineSegments(_0x141496){const _0x266de3=a0_0x3f7af0,_0x1f9f82=_0x141496[_0x266de3(0x105)]()[_0x266de3(0x14e)]('\x20'),_0x506727=_0x1f9f82[_0x266de3(0x17a)]/0x2;let _0x1abc69=[];for(let _0x5dadc4=0x0;_0x5dadc4<=_0x506727;_0x5dadc4++){const _0x42ef79={'x':0x8c0,'y':0x686},_0x4e20d5={'x':Math[_0x266de3(0x118)](parseFloat(_0x1f9f82[_0x5dadc4%_0x506727*0x2]),0x0)-_0x42ef79['x'],'y':Math['round'](parseFloat(_0x1f9f82[_0x5dadc4%_0x506727*0x2+0x1]),0x0)-_0x42ef79['y']},_0x1879cc={'x':Math[_0x266de3(0x118)](parseFloat(_0x1f9f82[(_0x5dadc4+0x1)%_0x506727*0x2]),0x0)-_0x42ef79['x'],'y':Math[_0x266de3(0x118)](parseFloat(_0x1f9f82[(_0x5dadc4+0x1)%_0x506727*0x2+0x1]),0x0)-_0x42ef79['y']},_0x151bcc=Math['atan2'](_0x4e20d5['y']-_0x1879cc['y'],_0x4e20d5['x']-_0x1879cc['x']),_0x457285=distance(_0x4e20d5['x'],_0x4e20d5['y'],_0x1879cc['x'],_0x1879cc['y']),_0x455c05={'x':Math[_0x266de3(0xec)](_0x151bcc-Math['PI']/0x2),'y':Math[_0x266de3(0x15a)](_0x151bcc-Math['PI']/0x2),'angle':_0x151bcc-Math['PI']/0x2},_0x389158=_0x1abc69['length'];_0x1abc69['push']({'startPoint':_0x1879cc,'endPoint':_0x4e20d5,'angle':_0x151bcc,'index':_0x389158,'length':_0x457285,'normal':_0x455c05});}return _0x1abc69;}